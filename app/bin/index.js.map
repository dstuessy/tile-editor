{"version":3,"sources":["webpack:///webpack/bootstrap 95233e1abf2f6e343672","webpack:///./src/state/State.es","webpack:///./src/main.es","webpack:///./src/TileEditor.es","webpack:///./src/state/StateMachine.es","webpack:///./src/lib/decorate.es","webpack:///./src/state/NormalState.es","webpack:///./src/lib/Key.es","webpack:///./src/Tile.es","webpack:///./src/lib/Vector.es"],"names":["State","editor","window","document","getElementById","load","update","clear","draw","requestAnimationFrame","TileEditor","canvas","HTMLCanvasElement","TypeError","ctx","getContext","cellWidth","tiles","key","sm","maximise","addEventListener","width","innerWidth","height","innerHeight","state","change","pos","color","fillStyle","fillRect","x","y","StateMachine","original","s","target","decoration","Proxy","get","prop","receiver","NormalState","tile","fillCell","Key","pressed","Set","e","preventDefault","stopPropagation","add","delete","keyName","has","Tile","Vector"],"mappings":"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","file":"index.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 1);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap 95233e1abf2f6e343672","\nexport default class State {}\n\n\n\n// WEBPACK FOOTER //\n// ./src/state/State.es","/* eslint-disable */\nimport TileEditor from './TileEditor'\n\nconst editor = new TileEditor(window, document.getElementById('game'))\n\neditor.load()\n\nfunction update () {\n    editor.clear()\n    editor.draw()\n    editor.update()\n    requestAnimationFrame(update)\n}\n\nupdate()\n\n\n\n// WEBPACK FOOTER //\n// ./src/main.es","import StateMachine from './state/StateMachine'\nimport NormalState from './state/NormalState'\nimport Key from './lib/Key.es'\nimport Tile from './Tile'\n\n/* global HTMLCanvasElement */\nexport default class TileEditor {\n    constructor (window, canvas) {\n        if (!(canvas instanceof HTMLCanvasElement)) {\n            throw TypeError('TileEditor(): argument needs to be an HTMLCanvasElement')\n        }\n\n        this.window = window\n        this.canvas = canvas\n        this.ctx = canvas.getContext('2d')\n        this.cellWidth = 32\n        this.tiles = [\n            new Tile(0, 0, 'blue'),\n            new Tile(0, 1, 'blue'),\n            new Tile(1, 1, 'blue'),\n            new Tile(1, 0, 'blue'),\n            new Tile(2, 2, 'red'),\n            new Tile(3, 3, 'red'),\n            new Tile(4, 4, 'green'),\n            new Tile(3, 5, 'green')\n        ]\n        this.key = new Key()\n        this.sm = new StateMachine(new NormalState())\n\n        this.maximise()\n\n        window.addEventListener('resize', () => {\n            this.maximise()\n        })\n    }\n    load () {\n        // load any assets here\n    }\n    maximise () {\n        this.canvas.width = this.window.innerWidth\n        this.canvas.height = this.window.innerHeight\n    }\n    clear () {\n        this.canvas.width = this.canvas.width\n    }\n    draw () {\n        this.sm.state.draw(this)\n    }\n    update () {\n        this.sm.change(this.sm.state.update(this))\n    }\n    fillCell (pos, color) {\n        if (!(pos || color)) {\n            throw TypeError('TileEditor.fillCell(): pos and color must not be falsy')\n        }\n\n        this.ctx.fillStyle = color\n        this.ctx.fillRect(pos.x * this.cellWidth, pos.y * this.cellWidth, pos.x + this.cellWidth, pos.y + this.cellWidth)\n    }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/TileEditor.es","import State from './State'\nimport decorate from '../lib/decorate'\n\nexport default class StateMachine {\n    constructor (original) {\n        this.original = original\n        this.state = original\n    }\n    change (s) {\n        if (!(s instanceof State)) {\n            throw TypeError('StateMachine.change(): first argument should be an instance of State.')\n        }\n\n        if (s !== this.state) {\n            this.state = decorate(this.original, s)\n        }\n\n        return this.state\n    }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/state/StateMachine.es","\nexport default (target, decoration) => new Proxy(target, {\n    get (target, prop, receiver) {\n        return prop in decoration ? decoration[prop] : target[prop]\n    }\n})\n\n\n\n// WEBPACK FOOTER //\n// ./src/lib/decorate.es","import State from './State'\n\nexport default class NormalState extends State {\n    draw (editor) {\n        for (const tile of editor.tiles) {\n            editor.fillCell(tile.pos, tile.color)\n        }\n    }\n    update (editor) {\n        return this\n    }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/state/NormalState.es","\nexport default class Key {\n    constructor () {\n        this.pressed = new Set()\n\n        window.addEventListener('keydown', (e) => {\n            e.preventDefault()\n            e.stopPropagation()\n            this.pressed.add(e.key)\n        })\n\n        window.addEventListener('keyup', (e) => {\n            e.preventDefault()\n            e.stopPropagation()\n            this.pressed.delete(e.key)\n        })\n    }\n    isDown (keyName) {\n        return this.pressed.has(keyName)\n    }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/lib/Key.es","import Vector from './lib/Vector'\n\nexport default class Tile {\n    constructor (x, y, color) {\n        this.pos = new Vector(x, y)\n        this.color = color\n    }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/Tile.es","\nexport default class Vector {\n    constructor (x = 0, y = 0) {\n        this.x = x\n        this.y = y\n    }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/lib/Vector.es"],"sourceRoot":""}